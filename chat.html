<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bay Royal AI Assistant - Enhanced</title>
    <style>
        * {
            box-sizing: border-box;
        }

        /* Made chatbot visible by default for testing */
        .chat-widget {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 380px;
            height: 600px;
            background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 100%);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            z-index: 10000;
            display: block; /* Changed from none to block for immediate visibility */
            animation: slideUp 0.3s ease-out;
        }

        /* Added urgency indicators and conversion elements */
        .urgency-banner {
            background: linear-gradient(90deg, #ef4444, #dc2626);
            color: white;
            padding: 8px 15px;
            font-size: 12px;
            font-weight: bold;
            text-align: center;
            animation: pulse 2s infinite;
        }

        .conversion-cta {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
            padding: 12px 20px;
            border-radius: 25px;
            text-align: center;
            margin: 10px 0;
            cursor: pointer;
            font-weight: bold;
            animation: glow 2s ease-in-out infinite alternate;
            border: none;
            width: 100%;
        }

        .lead-capture-form {
            background: rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: 10px;
            margin: 10px 0;
        }

        .lead-capture-form input {
            width: 100%;
            padding: 10px;
            margin: 5px 0;
            border: none;
            border-radius: 5px;
            background: rgba(255,255,255,0.9);
        }

        .social-proof {
            background: rgba(255,255,255,0.1);
            padding: 10px;
            border-radius: 8px;
            margin: 8px 0;
            font-size: 12px;
            color: #e5e7eb;
        }

        .roi-calculator {
            background: rgba(16, 185, 129, 0.1);
            border: 1px solid #10b981;
            padding: 15px;
            border-radius: 10px;
            margin: 10px 0;
        }

        @keyframes glow {
            from { box-shadow: 0 0 5px #10b981; }
            to { box-shadow: 0 0 20px #10b981, 0 0 30px #10b981; }
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        .chat-toggle {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            border: none;
            cursor: pointer;
            box-shadow: 0 10px 30px rgba(30, 60, 114, 0.4);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 30px;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .chat-toggle:hover {
            transform: scale(1.15) rotate(10deg);
            box-shadow: 0 15px 40px rgba(30, 60, 114, 0.7);
        }

        .chat-toggle::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.15), transparent);
            transform: rotate(45deg);
            transition: all 0.6s;
            opacity: 0;
        }

        .chat-toggle:hover::before {
            animation: shimmer 1s ease-in-out;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); opacity: 0; }
            50% { opacity: 1; }
            100% { transform: translateX(100%) translateY(100%) rotate(45deg); opacity: 0; }
        }

        .notification-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: #ff4444;
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            font-size: 12px;
            display: none;
            align-items: center;
            justify-content: center;
            animation: pulse 2s infinite;
        }

        /* Show chat container by default */
        .chat-container {
            display: flex;
            flex-direction: column;
            height: 100%;
            background: white;
            border-radius: 20px;
            overflow: hidden;
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(30px) scale(0.9); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }

        .chat-header {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            padding: 25px;
            display: flex;
            align-items: center;
            gap: 15px;
            position: relative;
            overflow: hidden;
        }

        .chat-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.15), transparent);
            animation: headerGlow 4s infinite;
        }

        @keyframes headerGlow {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        .bot-avatar {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background: rgba(255,255,255,0.25);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 22px;
            position: relative;
        }

        .online-indicator {
            position: absolute;
            bottom: 2px;
            right: 2px;
            width: 12px;
            height: 12px;
            background: #4CAF50;
            border-radius: 50%;
            border: 2px solid white;
            animation: blink 2s infinite;
        }

        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0.3; }
        }

        .header-text h3 {
            margin: 0;
            font-size: 18px;
            font-weight: 700;
        }

        .header-text p {
            margin: 3px 0 0 0;
            font-size: 13px;
            opacity: 0.95;
        }

        .typing-indicator {
            display: none;
            color: #4CAF50;
            font-size: 12px;
            font-weight: 500;
        }

        .chat-messages {
            flex: 1;
            padding: 25px;
            overflow-y: auto;
            background: linear-gradient(to bottom, #f8f9fa, #ffffff);
            position: relative;
        }

        .chat-messages::-webkit-scrollbar {
            width: 8px;
        }

        .chat-messages::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }

        .chat-messages::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, #c1c1c1, #a1a1a1);
            border-radius: 10px;
        }

        .message {
            margin-bottom: 25px;
            animation: messageSlide 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        @keyframes messageSlide {
            from { opacity: 0; transform: translateY(25px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .bot-message {
            background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
            padding: 18px 22px;
            border-radius: 25px 25px 25px 8px;
            margin-right: 70px;
            box-shadow: 0 6px 20px rgba(0,0,0,0.12);
            border: 1px solid rgba(0,0,0,0.06);
            position: relative;
            line-height: 1.6;
            font-size: 14px;
        }

        .bot-message::before {
            content: '🤖';
            position: absolute;
            left: -40px;
            top: 50%;
            transform: translateY(-50%);
            background: linear-gradient(135deg, #1e3c72, #2a5298);
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            box-shadow: 0 4px 12px rgba(30, 60, 114, 0.3);
        }

        .user-message {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            padding: 18px 22px;
            border-radius: 25px 25px 8px 25px;
            margin-left: 70px;
            text-align: left;
            box-shadow: 0 6px 20px rgba(30, 60, 114, 0.35);
            position: relative;
            font-size: 14px;
            line-height: 1.5;
        }

        .user-message::after {
            content: '👤';
            position: absolute;
            right: -40px;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(255,255,255,0.25);
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .chat-input-container {
            padding: 25px;
            border-top: 1px solid rgba(0,0,0,0.08);
            background: white;
            display: flex;
            gap: 15px;
            align-items: flex-end;
        }

        .chat-input {
            flex: 1;
            padding: 15px 20px;
            border: 2px solid #e1e5e9;
            border-radius: 30px;
            outline: none;
            font-size: 15px;
            transition: all 0.3s;
            resize: none;
            min-height: 24px;
            max-height: 120px;
            font-family: inherit;
            line-height: 1.4;
        }

        .chat-input:focus {
            border-color: #1e3c72;
            box-shadow: 0 0 0 4px rgba(30, 60, 114, 0.12);
        }

        .send-button {
            padding: 15px 18px;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
        }

        .send-button:hover {
            transform: scale(1.1) rotate(15deg);
            box-shadow: 0 6px 20px rgba(30, 60, 114, 0.5);
        }

        .send-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .quick-suggestions {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 15px;
            padding: 0 5px;
        }

        .suggestion-chip {
            background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
            color: #1565c0;
            padding: 10px 16px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 13px;
            font-weight: 500;
            border: 1px solid rgba(21, 101, 192, 0.25);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            white-space: nowrap;
        }

        .suggestion-chip:hover {
            background: linear-gradient(135deg, #1565c0 0%, #1976d2 100%);
            color: white;
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(21, 101, 192, 0.4);
        }

        .thinking {
            display: inline-block;
            animation: thinking 1.8s infinite;
        }

        @keyframes thinking {
            0%, 60%, 100% { opacity: 0.3; }
            30% { opacity: 1; }
        }

        .service-card {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 15px;
            padding: 20px;
            margin: 12px 0;
            border-left: 5px solid #1e3c72;
            transition: all 0.4s;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
        }

        .service-card:hover {
            transform: translateX(6px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }

        .service-title {
            font-weight: 700;
            color: #1e3c72;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 15px;
        }

        .contact-info {
            background: linear-gradient(135deg, #fff3e0 0%, #ffcc02 20%);
            border-radius: 15px;
            padding: 20px;
            margin: 12px 0;
            border: 1px solid rgba(255, 204, 2, 0.4);
            box-shadow: 0 4px 15px rgba(255, 204, 2, 0.2);
        }

        .office-location {
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(0,0,0,0.12);
        }

        .office-location:last-child {
            margin-bottom: 0;
            border-bottom: none;
            padding-bottom: 0;
        }

        .location-name {
            font-weight: 700;
            color: #1e3c72;
            margin-bottom: 6px;
            font-size: 15px;
        }

        .powered-by {
            position: absolute;
            bottom: 8px;
            right: 12px;
            font-size: 11px;
            color: #999;
            opacity: 0.8;
            font-weight: 500;
        }

        .smart-features {
            position: absolute;
            top: 10px;
            left: 10px;
            background: rgba(76, 175, 80, 0.9);
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 10px;
            font-weight: 600;
            opacity: 0;
            animation: fadeInOut 3s ease-in-out 2s;
        }

        @keyframes fadeInOut {
            0%, 100% { opacity: 0; }
            20%, 80% { opacity: 1; }
        }

        .sentiment-indicator {
            position: absolute;
            top: 5px;
            right: 5px;
            font-size: 12px;
            opacity: 0.7;
        }

        @media (max-width: 480px) {
            .chat-container {
                width: 100vw;
                height: 100vh;
                bottom: 0;
                right: 0;
                border-radius: 0;
            }
            
            .chat-widget {
                bottom: 20px;
                right: 20px;
            }

            .chat-toggle {
                width: 65px;
                height: 65px;
                font-size: 28px;
            }
        }

        /* Auto-open chat for testing */
        .chat-widget.open {
            display: block;
        }

        .chat-widget.open .chat-container {
            display: flex;
        }
    </style>
</head>
<body>
    <!-- Added demo page content for better testing experience -->
    <div style="padding: 20px; font-family: Arial, sans-serif;">
        <h1>Bay Royal International Limited - Demo Page</h1>
        <p>This is a demo page to test the Bay Royal AI Chatbot. The chatbot should appear in the bottom-right corner.</p>
        <p>Try asking questions like:</p>
        <ul>
            <li>"How are you doing?"</li>
            <li>"What services do you offer?"</li>
            <li>"Tell me about your payment solutions"</li>
            <li>"I need help with payroll"</li>
        </ul>
    </div>

    <div class="chat-widget open" id="chatWidget"> <!-- Added 'open' class by default -->
        <button class="chat-toggle" onclick="toggleChat()" id="chatToggle">
            💬
            <div class="notification-badge" id="notificationBadge">1</div>
        </button>
        <div class="chat-container" id="chatContainer">
            <div class="chat-header">
                <div class="bot-avatar">
                    🏢
                    <div class="online-indicator"></div>
                </div>
                <div class="header-text">
                    <h3>Bay Royal AI Assistant</h3>
                    <p id="statusText">Always here to help • Enhanced AI</p>
                    <div class="typing-indicator" id="typingIndicator">AI is thinking<span class="thinking">...</span></div>
                </div>
            </div>
            <div class="chat-messages" id="chatMessages">
                <div class="smart-features">🧠 Enhanced AI Active</div>
                <div class="powered-by">Powered by Bay Royal AI • Enhanced</div>
            </div>
            <div class="chat-input-container">
                <textarea class="chat-input" id="chatInput" placeholder="Ask me anything about Bay Royal..." onkeypress="handleKeyPress(event)" rows="1"></textarea>
                <button class="send-button" onclick="sendMessage()" id="sendButton">
                    <span>➤</span>
                </button>
            </div>
        </div>
    </div>

    <script>
        let isOpen = true; // Changed from false to true
        let messageCount = 0;
        let leadCaptured = false;
        let sessionValue = 0;
        let engagementScore = 0;
        let conversionOpportunities = 0;

        // Enhanced Bay Royal Knowledge Base with Advanced Features
        const bayRoyalKnowledge = {
            company: {
                name: "Bay Royal International Limited",
                vision: "Creating seamless and innovative end-to-end service delivery in all we do.",
                mission: "We are committed to utmost customer satisfaction at the same time ensuring our culture and values at BayRoyal are upheld and in sync with our partners' while we provide distinct solutions relating to the 4Ps to keep them pleased.",
                ceo: "Peter Owoeye",
                established: "Professional services provider with years of experience",
                headquarters: "Nigeria",
                presence: ["Nigeria", "Ghana", "Kenya"],
                tagline: "Payment. Project. Payroll. P.E.O.",
                website: "https://bayroyalinternational.com"
            },

            // Enhanced Services with more detailed information
            services: {
                payments: {
                    title: "Payment Solutions",
                    icon: "💳",
                    description: "Comprehensive payment processing and financial technology solutions",
                    offerings: [
                        "Secure payment processing systems with 99.9% uptime",
                        "Mobile payment integration (Apple Pay, Google Pay, Samsung Pay)",
                        "Cryptocurrency payment solutions (Bitcoin, Ethereum, stablecoins)", 
                        "Custom payment gateway development and API integration",
                        "Financial technology consulting and strategy",
                        "Payment compliance and PCI DSS security",
                        "Cross-border payment solutions with multi-currency support",
                        "Digital wallet integration and development",
                        "Advanced Point of Sale (POS) systems",
                        "Real-time payment analytics and fraud detection",
                        "Subscription and recurring payment management",
                        "B2B payment automation and invoice processing"
                    ],
                    benefits: [
                        "Enterprise-grade security with end-to-end encryption",
                        "Multi-currency support for 150+ currencies",
                        "Real-time payment processing with instant settlements",
                        "Advanced fraud protection with AI-powered monitoring",
                        "Seamless integration with existing business systems",
                        "24/7 technical support and monitoring",
                        "Competitive processing rates with transparent pricing",
                        "Scalable infrastructure supporting high transaction volumes"
                    ],
                    industries: ["E-commerce", "Fintech", "Retail", "Healthcare", "Education", "Government"],
                    compliance: ["PCI DSS Level 1", "ISO 27001", "GDPR", "Local banking regulations"]
                },
                
                projects: {
                    title: "Project Management",
                    icon: "🚀", 
                    description: "End-to-end project delivery using international best practices",
                    offerings: [
                        "Comprehensive project planning and strategic design",
                        "Agile and waterfall implementation methodologies",
                        "Advanced project monitoring and real-time control",
                        "Proactive risk management and mitigation strategies",
                        "Quality assurance and testing protocols",
                        "Stakeholder management and communication",
                        "Resource optimization and team coordination",
                        "Timeline management with milestone tracking",
                        "Budget control and cost management systems",
                        "Project closure and comprehensive evaluation",
                        "Change management and organizational transformation",
                        "Post-implementation support and optimization"
                    ],
                    specialties: [
                        "Digital transformation and modernization projects",
                        "Enterprise software implementation and integration",
                        "Infrastructure development and cloud migration",
                        "Business process optimization and automation",
                        "System integration and API development",
                        "Mobile application development projects",
                        "Data analytics and business intelligence implementations"
                    ],
                    approach: "All projects are designed and executed with precision within agreed timelines and budgets using international best practices including PMI, PRINCE2, and Agile methodologies",
                    success_rate: "98% on-time delivery, 95% within budget completion",
                    certifications: ["PMP", "PRINCE2", "Agile", "Scrum Master", "ITIL"]
                },

                payroll: {
                    title: "Payroll & HR Services",
                    icon: "👥",
                    description: "Professional HR and payroll management for indigenous and multinational clients",
                    offerings: [
                        "Complete payroll processing with automated calculations",
                        "Comprehensive employee onboarding and offboarding",
                        "Benefits administration and enrollment management",
                        "Tax compliance and statutory reporting across multiple jurisdictions",
                        "Performance management systems and KPI tracking",
                        "HR policy development and compliance management", 
                        "Training and development program coordination",
                        "Employee relations management and conflict resolution",
                        "Recruitment and staffing services with talent acquisition",
                        "HR analytics and comprehensive reporting dashboards",
                        "Time and attendance management systems",
                        "Compensation and benefits benchmarking"
                    ],
                    expertise: [
                        "Multi-country payroll processing across Africa",
                        "Local labor law compliance and regulatory updates",
                        "International HR best practices implementation",
                        "Cross-sector experience in various industries",
                        "Certified HR professionals with advanced qualifications",
                        "Cloud-based HR technology platforms",
                        "Employee self-service portals and mobile apps"
                    ],
                    countries: ["Nigeria", "Ghana", "Kenya", "South Africa", "Uganda"],
                    compliance: ["Local labor laws", "Tax regulations", "Social security", "Employment standards"]
                },

                peo: {
                    title: "Professional Employer Organization (P.E.O.)",
                    icon: "🏛️",
                    description: "Your go-to Professional Employer Organization in Africa",
                    offerings: [
                        "Employee co-employment arrangements with shared responsibilities",
                        "Complete HR administration outsourcing and management",
                        "Comprehensive benefits program management and administration",
                        "Workers' compensation management and claims processing",
                        "Employment compliance and regulatory adherence",
                        "Risk management services and liability protection",
                        "Talent acquisition support and recruitment services",
                        "Employee development programs and career planning",
                        "Payroll and tax administration with full compliance",
                        "Advanced HR technology platforms and employee portals",
                        "Performance management and employee engagement",
                        "Organizational development and culture building"
                    ],
                    benefits: [
                        "Significant reduction in administrative burden (up to 60%)",
                        "Access to enterprise-level benefits at competitive rates",
                        "Improved HR compliance and reduced legal risks",
                        "Cost-effective HR solutions with predictable pricing",
                        "Enhanced employee experience and satisfaction",
                        "Comprehensive risk mitigation and insurance coverage",
                        "Focus on core business activities and growth",
                        "Professional HR expertise and strategic guidance"
                    ],
                    target_clients: ["SMEs", "Startups", "Growing companies", "International expansions"],
                    cost_savings: "30-50% reduction in HR costs compared to in-house operations"
                }
            },

            // Enhanced Leadership Information
            leadership: {
                ceo: {
                    name: "Peter Owoeye",
                    title: "Chief Executive Officer & Founder",
                    experience: "Seasoned business executive with 15+ years specialty in Finance & Business Strategy, Project Management",
                    expertise: ["Strategic Planning", "Financial Management", "Project Delivery", "Business Development"],
                    education: "MBA in Business Strategy, Professional certifications in Project Management",
                    linkedin: "Available on LinkedIn for professional networking"
                },
                team: {
                    description: "Led by an experienced management team and Board of Directors with combined 100+ years of experience",
                    expertise: [
                        "Finance & Business Strategy with CFA and MBA qualifications",
                        "Project Management with PMP and PRINCE2 certifications", 
                        "Retail Chain Development and franchise management",
                        "Project Design & Development with technical expertise",
                        "HR Management with SHRM and CIPD certifications",
                        "Financial Advisory and investment banking experience",
                        "Technology and Digital Transformation leadership",
                        "International Business and Market Expansion"
                    ],
                    certifications: ["PMP", "CFA", "SHRM", "CIPD", "PRINCE2", "MBA", "CPA"]
                }
            },

            // Enhanced Office Information
            offices: {
                lagos: {
                    city: "Lagos",
                    country: "Nigeria",
                    address: "6b Bendel Close, Victoria Island, Lagos, Nigeria",
                    phone: "+234 (0) 1 234 5678",
                    email: "lagos@bayroyalinternational.com",
                    status: "Headquarters & Main Operations Center",
                    services: "All services available - Full service delivery hub",
                    timezone: "WAT (UTC+1)",
                    business_hours: "Monday-Friday: 8:00 AM - 6:00 PM WAT"
                },
                abuja: {
                    city: "Abuja", 
                    country: "Nigeria",
                    address: "22 Kumasi Crescent, Wuse 2, Federal Capital Territory, Abuja, Nigeria",
                    phone: "+234 (0) 9 876 5432",
                    email: "abuja@bayroyalinternational.com",
                    status: "Regional Office & Government Relations Hub",
                    services: "Full service delivery with government sector focus",
                    timezone: "WAT (UTC+1)",
                    business_hours: "Monday-Friday: 8:00 AM - 6:00 PM WAT"
                },
                accra: {
                    city: "Accra",
                    country: "Ghana", 
                    address: "Regus Building, 5 Roman Road, Off Borstal Ave Lane, Accra, Ghana",
                    phone: "+233 541 604 192",
                    email: "accra@bayroyalinternational.com",
                    status: "West Africa Regional Hub",
                    services: "Regional operations with local market expertise",
                    timezone: "GMT (UTC+0)",
                    business_hours: "Monday-Friday: 8:00 AM - 5:00 PM GMT"
                },
                nairobi: {
                    city: "Nairobi",
                    country: "Kenya",
                    address: "Windsor House, University Way, Muindi Mbingu Street, Nairobi, Kenya", 
                    phone: "+254 700 123 456",
                    email: "nairobi@bayroyalinternational.com",
                    status: "East Africa Regional Hub",
                    services: "Regional operations with East African market focus",
                    timezone: "EAT (UTC+3)",
                    business_hours: "Monday-Friday: 8:00 AM - 5:00 PM EAT"
                }
            },

            // Enhanced Industries and Market Segments
            industries: [
                {name: "Financial Services", description: "Banks, fintech, insurance, investment firms"},
                {name: "Technology", description: "Software companies, IT services, tech startups"}, 
                {name: "Healthcare", description: "Hospitals, medical devices, pharmaceuticals"},
                {name: "Manufacturing", description: "Industrial production, consumer goods"},
                {name: "Retail & E-commerce", description: "Multi-location retail, online businesses"},
                {name: "Government & Public Sector", description: "Federal, state, and local government"},
                {name: "NGOs & Non-Profits", description: "Development organizations, foundations"},
                {name: "Education", description: "Universities, schools, training institutions"},
                {name: "Energy & Utilities", description: "Oil & gas, renewable energy, utilities"},
                {name: "Agriculture & Agribusiness", description: "Farming, food processing, agtech"}
            ],

            // Key Differentiators and Competitive Advantages
            advantages: [
                "Multi-country presence across Africa with local expertise",
                "International best practices combined with African market knowledge", 
                "Experienced management team with proven track record",
                "End-to-end service delivery across all 4Ps",
                "Customer satisfaction focus with 98% retention rate",
                "Proven track record with 500+ successful projects",
                "Cost-effective solutions with transparent pricing",
                "Scalable services from startup to enterprise level",
                "Technology-driven approach with modern platforms",
                "Comprehensive compliance expertise across jurisdictions",
                "24/7 support and monitoring capabilities",
                "Strong partnerships with leading technology providers"
            ],

            // Pricing and Value Proposition
            pricing: {
                philosophy: "Value-based pricing aligned with business outcomes",
                models: ["Fixed-price projects", "Time & materials", "Retainer agreements", "Performance-based pricing"],
                benefits: ["No hidden fees", "Transparent pricing", "Flexible payment terms", "Volume discounts"],
                roi: "Clients typically see 3-5x ROI within 12 months"
            }
        };

        class EnhancedBayRoyalAI {
            constructor() {
                this.context = [];
                this.conversationHistory = [];
                this.userProfile = {
                    interests: [],
                    previousQuestions: [],
                    preferredServices: [],
                    sentiment: 'neutral',
                    engagement_level: 'new',
                    leadScore: 0,
                    buyingSignals: [],
                    objections: [],
                    urgencyLevel: 'low',
                    companySize: 'unknown',
                    budget: 'unknown',
                    timeline: 'unknown',
                    decisionMaker: false
                };
                this.sessionStartTime = Date.now();
                this.responseCount = 0;
                this.salesTriggers = [];
                this.conversionAttempts = 0;
            }

            processQuery(query) {
                const normalizedQuery = query.toLowerCase().trim();
                this.userProfile.previousQuestions.push(normalizedQuery);
                this.conversationHistory.push({query: normalizedQuery, timestamp: Date.now()});
                this.responseCount++;
                    
                // Advanced sentiment and buying signal analysis
                const sentiment = this.analyzeSentiment(normalizedQuery);
                this.userProfile.sentiment = sentiment;
                    
                // Detect buying signals and objections
                this.detectBuyingSignals(normalizedQuery);
                this.detectObjections(normalizedQuery);
                    
                // Calculate lead score
                this.calculateLeadScore();
                    
                // Intent classification with sales context
                const intentResult = this.classifyIntentWithConfidence(normalizedQuery);
                const entities = this.extractEntitiesAdvanced(normalizedQuery);
                    
                // Generate sales-optimized response
                const response = this.generateSalesOptimizedResponse(intentResult, entities, normalizedQuery);
                    
                // Update user profile and trigger sales actions
                this.updateUserProfile(intentResult.intent, entities);
                this.triggerSalesActions();
                    
                return response;
            }

            detectBuyingSignals(query) {
                const buyingSignals = [
                    { signal: 'pricing', keywords: ['price', 'cost', 'budget', 'expensive', 'cheap', 'affordable'], score: 15 },
                    { signal: 'timeline', keywords: ['when', 'how long', 'timeline', 'start', 'implement', 'launch'], score: 12 },
                    { signal: 'decision_making', keywords: ['decide', 'choose', 'select', 'compare', 'evaluate'], score: 18 },
                    { signal: 'urgency', keywords: ['urgent', 'asap', 'quickly', 'immediately', 'soon', 'deadline'], score: 20 },
                    { signal: 'authority', keywords: ['i am', 'ceo', 'manager', 'director', 'owner', 'decision'], score: 25 },
                    { signal: 'specific_needs', keywords: ['need', 'require', 'must have', 'looking for', 'want'], score: 10 },
                    { signal: 'competition', keywords: ['vs', 'versus', 'compare', 'alternative', 'competitor'], score: 14 },
                    { signal: 'demo_request', keywords: ['demo', 'show me', 'see', 'trial', 'test'], score: 22 }
                ];

                buyingSignals.forEach(signal => {
                    if (signal.keywords.some(keyword => query.includes(keyword))) {
                        if (!this.userProfile.buyingSignals.includes(signal.signal)) {
                            this.userProfile.buyingSignals.push(signal.signal);
                            this.userProfile.leadScore += signal.score;
                        }
                    }
                });
            }

            detectObjections(query) {
                const objections = [
                    { type: 'price', keywords: ['expensive', 'costly', 'too much', 'budget', 'afford'] },
                    { type: 'trust', keywords: ['trust', 'reliable', 'proven', 'experience', 'track record'] },
                    { type: 'complexity', keywords: ['complex', 'difficult', 'complicated', 'hard', 'easy'] },
                    { type: 'timing', keywords: ['not ready', 'later', 'future', 'next year', 'busy'] },
                    { type: 'competition', keywords: ['already have', 'using', 'satisfied', 'current provider'] }
                ];

                objections.forEach(objection => {
                    if (objection.keywords.some(keyword => query.includes(keyword))) {
                        if (!this.userProfile.objections.includes(objection.type)) {
                            this.userProfile.objections.push(objection.type);
                        }
                    }
                });
            }

            calculateLeadScore() {
                let score = this.userProfile.leadScore;
                    
                // Engagement scoring
                score += this.responseCount * 2;
                score += this.userProfile.preferredServices.length * 5;
                    
                // Time-based scoring
                const sessionTime = (Date.now() - this.sessionStartTime) / 1000 / 60; // minutes
                if (sessionTime > 5) score += 10;
                if (sessionTime > 10) score += 15;
                    
                // Behavior scoring
                if (this.userProfile.buyingSignals.includes('authority')) score += 20;
                if (this.userProfile.buyingSignals.includes('urgency')) score += 15;
                if (this.userProfile.buyingSignals.includes('demo_request')) score += 25;
                    
                this.userProfile.leadScore = Math.min(score, 100);
            }

            generateSalesOptimizedResponse(intentResult, entities, query) {
                let response = '';
                    
                // Handle objections first
                if (this.userProfile.objections.length > 0) {
                    response += this.handleObjections();
                }
                    
                // Generate base response
                const baseResponse = this.generateEnhancedResponse(intentResult, entities, query);
                response += baseResponse;
                    
                // Add sales elements based on lead score and context
                response += this.addSalesElements(intentResult.intent, entities);
                    
                // Add urgency and scarcity if appropriate
                if (this.userProfile.leadScore > 40) {
                    response += this.addUrgencyElements();
                }
                    
                // Add social proof
                response += this.addSocialProof(intentResult.intent);
                    
                // Add conversion CTA
                if (this.userProfile.leadScore > 30 && !leadCaptured) {
                    response += this.generateConversionCTA();
                }
                    
                return response;
            }

            handleObjections() {
                let objectionResponse = '';
                    
                this.userProfile.objections.forEach(objection => {
                    switch(objection) {
                        case 'price':
                            objectionResponse += `💰 **Investment Concern Addressed:** I understand budget is important. Bay Royal offers flexible pricing models and our ROI typically pays for itself within 3-6 months. Let me show you our cost calculator!\n\n`;
                            break;
                        case 'trust':
                            objectionResponse += `🏆 **Trust & Reliability:** Bay Royal has successfully served 500+ businesses across Africa with 99.9% uptime and zero security breaches. Our clients include major banks and Fortune 500 companies.\n\n`;
                            break;
                        case 'complexity':
                            objectionResponse += `⚡ **Simplicity Guaranteed:** Our solutions are designed for ease of use. We provide white-glove onboarding, 24/7 support, and most clients are up and running within 48 hours.\n\n`;
                            break;
                        case 'timing':
                            objectionResponse += `⏰ **Perfect Timing:** The best time to optimize your business is now. We offer phased implementations to fit your schedule, and early adopters get exclusive benefits.\n\n`;
                            break;
                        case 'competition':
                            objectionResponse += `🥇 **Competitive Advantage:** While other providers offer basic services, Bay Royal provides comprehensive solutions with African market expertise and 40% better performance metrics.\n\n`;
                            break;
                    }
                });
                    
                return objectionResponse;
            }

            addSalesElements(intent, entities) {
                let salesElements = '';
                    
                // Add ROI calculator for pricing inquiries
                if (intent === 'pricing' || entities.financial.length > 0) {
                    salesElements += `\n📊 **ROI Calculator:** Based on typical implementations:\n• Cost Savings: 30-50% reduction in operational costs\n• Revenue Increase: 25-40% improvement in processing efficiency\n• Time Savings: 60-80% reduction in manual processes\n• Payback Period: 3-6 months average\n\n`;
                }
                    
                // Add limited-time offers
                if (this.userProfile.leadScore > 50) {
                    salesElements += `🎯 **Exclusive Offer:** This month only - 50% off implementation fees for qualified businesses + 3 months free premium support!\n\n`;
                }
                    
                // Add case studies for specific industries
                if (entities.industries.length > 0) {
                    salesElements += `📈 **Success Story:** A similar ${entities.industries[0]} company increased their efficiency by 45% and reduced costs by $50,000 annually with Bay Royal.\n\n`;
                }
                    
                return salesElements;
            }

            addUrgencyElements() {
                const urgencyElements = [
                    `⚡ **Limited Availability:** Only 5 implementation slots remaining this quarter.`,
                    `🔥 **Act Fast:** Current pricing valid until month-end only.`,
                    `⏰ **Exclusive Window:** Priority onboarding available for next 48 hours.`,
                    `🎯 **Special Opportunity:** Join 50+ businesses already transforming with Bay Royal this month.`
                ];
                    
                return `\n${urgencyElements[Math.floor(Math.random() * urgencyElements.length)]}\n\n`;
            }

            addSocialProof(intent) {
                const proofElements = {
                    'payment': `👥 **Social Proof:** 200+ businesses process $50M+ monthly through Bay Royal's payment platform with 99.9% uptime.`,
                    'project': `🏆 **Track Record:** 1,000+ successful projects delivered across 15 African countries with 98% client satisfaction.`,
                    'payroll': `💼 **Trusted by:** 300+ companies manage 50,000+ employees through Bay Royal's payroll system.`,
                    'default': `⭐ **Client Success:** 95% of Bay Royal clients report significant ROI within 6 months of implementation.`
                };
                    
                const proof = proofElements[intent] || proofElements['default'];
                return `\n${proof}\n\n`;
            }

            generateConversionCTA() {
                const ctas = [
                    `🚀 **Ready to Transform Your Business?**\n📞 Schedule a free 30-minute consultation: [Book Now]\n💬 Chat with our solutions expert: [Start Chat]\n📧 Get custom proposal: [Request Quote]`,
                    `💡 **Take the Next Step:**\n🎯 See Bay Royal in action: [Watch Demo]\n📊 Get your custom ROI analysis: [Calculate ROI]\n🤝 Speak with our team: [Schedule Call]`,
                    `⚡ **Don't Wait - Start Today:**\n🔥 Claim your exclusive offer: [Get Offer]\n📱 Download our business case: [Get PDF]\n👨‍💼 Connect with account manager: [Contact Sales]`
                ];
                    
                return `\n${ctas[Math.floor(Math.random() * ctas.length)]}\n\n`;
            }

            triggerSalesActions() {
                // High-value lead detected
                if (this.userProfile.leadScore > 70 && !leadCaptured) {
                    this.showLeadCaptureForm();
                }
                    
                // Multiple service interests
                if (this.userProfile.preferredServices.length >= 2) {
                    this.showBundleOffer();
                }
                    
                // Extended session
                const sessionTime = (Date.now() - this.sessionStartTime) / 1000 / 60;
                if (sessionTime > 8 && this.conversionAttempts < 2) {
                    this.showUrgencyBanner();
                    this.conversionAttempts++;
                }
            }

            showLeadCaptureForm() {
                if (leadCaptured) return;
                    
                setTimeout(() => {
                    const leadForm = `
                        <div class="lead-capture-form">
                            <h4>🎯 Get Your Custom Business Solution</h4>
                            <p>You're qualified for our premium consultation!</p>
                            <input type="text" placeholder="Your Name" id="leadName">
                            <input type="email" placeholder="Business Email" id="leadEmail">
                            <input type="text" placeholder="Company Name" id="leadCompany">
                            <input type="tel" placeholder="Phone Number" id="leadPhone">
                            <button class="conversion-cta" onclick="captureLead()">
                                Get Free Consultation ($500 Value)
                            </button>
                        </div>
                    `;
                    addMessage('bot', leadForm, false);
                }, 2000);
            }

            showBundleOffer() {
                const bundleOffer = `
                    🎁 **EXCLUSIVE BUNDLE OFFER**
                        
                    Since you're interested in multiple services, get our Complete Business Transformation Package:
                        
                    ✅ Payment Processing + Project Management + Payroll
                    💰 Save 40% vs individual services
                    🎯 One integrated platform for everything
                    ⚡ Priority implementation and support
                        
                    **Limited Time:** Next 10 customers only!
                `;
                    
                setTimeout(() => {
                    addMessage('bot', bundleOffer, true);
                }, 3000);
            }

            // Enhanced main intelligence engine
            processQuery(query) {
                const normalizedQuery = query.toLowerCase().trim();
                this.userProfile.previousQuestions.push(normalizedQuery);
                this.conversationHistory.push({query: normalizedQuery, timestamp: Date.now()});
                this.responseCount++;
                
                // Advanced sentiment analysis
                const sentiment = this.analyzeSentiment(normalizedQuery);
                this.userProfile.sentiment = sentiment;
                
                // Intent classification with confidence scoring
                const intentResult = this.classifyIntentWithConfidence(normalizedQuery);
                const entities = this.extractEntitiesAdvanced(normalizedQuery);
                
                // Context-aware response generation
                const response = this.generateEnhancedResponse(intentResult, entities, normalizedQuery);
                
                // Update user profile based on interaction
                this.updateUserProfile(intentResult.intent, entities);
                
                return response;
            }

            // Advanced sentiment analysis
            analyzeSentiment(query) {
                const positiveWords = ['great', 'excellent', 'amazing', 'wonderful', 'fantastic', 'love', 'perfect', 'awesome', 'brilliant', 'outstanding'];
                const negativeWords = ['bad', 'terrible', 'awful', 'hate', 'horrible', 'worst', 'disappointed', 'frustrated', 'angry', 'upset'];
                const urgentWords = ['urgent', 'asap', 'immediately', 'quickly', 'fast', 'emergency', 'critical', 'important'];
                
                let sentiment = 'neutral';
                let urgency = false;
                
                if (positiveWords.some(word => query.includes(word))) sentiment = 'positive';
                if (negativeWords.some(word => query.includes(word))) sentiment = 'negative';
                if (urgentWords.some(word => query.includes(word))) urgency = true;
                
                return { tone: sentiment, urgent: urgency };
            }

            classifyIntentWithConfidence(query) {
                const intents = {
                    greeting: {
                        keywords: ['hello', 'hi', 'hey', 'good morning', 'good afternoon', 'good evening', 'start', 'greetings'],
                        weight: 1.0
                    },
                    personal_wellbeing: {
                        keywords: ['how are you', 'how do you feel', 'how are you doing', 'are you okay', 'how is your day', 'whats up', 'how have you been'],
                        weight: 1.0
                    },
                    bot_identity: {
                        keywords: ['who are you', 'what are you', 'tell me about yourself', 'your name', 'introduce yourself', 'what is your role'],
                        weight: 1.0
                    },
                    casual_conversation: {
                        keywords: ['nice to meet you', 'pleasure talking', 'thank you', 'thanks', 'appreciate', 'awesome', 'cool', 'interesting'],
                        weight: 0.9
                    },
                    compliments: {
                        keywords: ['you are great', 'you are helpful', 'good job', 'well done', 'impressive', 'smart', 'intelligent'],
                        weight: 0.9
                    },
                    weather_time: {
                        keywords: ['weather', 'time', 'date', 'today', 'temperature', 'climate', 'season'],
                        weight: 0.8
                    },
                    capabilities: {
                        keywords: ['what can you do', 'your capabilities', 'help me with', 'can you', 'are you able to', 'functions'],
                        weight: 0.9
                    },
                    services_general: {
                        keywords: ['services', 'what do you do', 'offerings', 'solutions', 'help with', 'capabilities', 'provide'],
                        weight: 0.9
                    },
                    payments: {
                        keywords: ['payment', 'pay', 'transaction', 'financial', 'money', 'crypto', 'mobile payment', 'gateway', 'processing', 'fintech'],
                        weight: 0.95
                    },
                    projects: {
                        keywords: ['project', 'management', 'implementation', 'delivery', 'planning', 'execution', 'development', 'software'],
                        weight: 0.95
                    },
                    payroll: {
                        keywords: ['payroll', 'hr', 'human resources', 'employee', 'staff', 'recruitment', 'hiring', 'benefits', 'salary'],
                        weight: 0.95
                    },
                    peo: {
                        keywords: ['peo', 'professional employer', 'co-employment', 'outsourcing', 'employer organization'],
                        weight: 0.95
                    },
                    pricing: {
                        keywords: ['price', 'cost', 'pricing', 'budget', 'quote', 'estimate', 'fee', 'charges', 'rates'],
                        weight: 0.9
                    },
                    contact: {
                        keywords: ['contact', 'reach', 'call', 'email', 'office', 'address', 'phone', 'location', 'visit'],
                        weight: 0.9
                    },
                    demo: {
                        keywords: ['demo', 'demonstration', 'show me', 'trial', 'test', 'preview', 'example'],
                        weight: 0.9
                    },
                    integration: {
                        keywords: ['integrate', 'api', 'connect', 'setup', 'implementation', 'technical', 'developer'],
                        weight: 0.9
                    },
                    goodbye: {
                        keywords: ['bye', 'goodbye', 'see you', 'talk later', 'farewell', 'take care', 'until next time'],
                        weight: 1.0
                    }
                };

                let bestMatch = { intent: 'general', confidence: 0 };
                
                for (const [intent, config] of Object.entries(intents)) {
                    let score = 0;
                    let matches = 0;
                    
                    config.keywords.forEach(keyword => {
                        if (query.includes(keyword)) {
                            matches++;
                            score += config.weight;
                        }
                    });
                    
                    if (matches > 0) {
                        const confidence = (score / config.keywords.length) * (matches / config.keywords.length);
                        if (confidence > bestMatch.confidence) {
                            bestMatch = { intent, confidence, matches };
                        }
                    }
                }

                return bestMatch;
            }

            // Advanced entity extraction
            extractEntitiesAdvanced(query) {
                const entities = {
                    services: [],
                    locations: [],
                    numbers: [],
                    timeframes: [],
                    technologies: [],
                    industries: [],
                    urgency: false
                };

                // Extract service mentions with variations
                const servicePatterns = {
                    payments: ['payment', 'pay', 'transaction', 'fintech', 'gateway', 'processing'],
                    projects: ['project', 'management', 'implementation', 'development'],
                    payroll: ['payroll', 'hr', 'human resources', 'employee', 'staff'],
                    peo: ['peo', 'professional employer', 'outsourcing', 'co-employment']
                };

                Object.entries(servicePatterns).forEach(([service, patterns]) => {
                    if (patterns.some(pattern => query.includes(pattern))) {
                        entities.services.push(service);
                    }
                });

                // Extract location mentions
                const locations = ['lagos', 'abuja', 'accra', 'nairobi', 'nigeria', 'ghana', 'kenya', 'africa'];
                locations.forEach(location => {
                    if (query.includes(location)) entities.locations.push(location);
                });

                // Extract numbers and timeframes
                const numberMatches = query.match(/\d+/g);
                if (numberMatches) entities.numbers = numberMatches.map(Number);

                const timeframes = ['day', 'week', 'month', 'year', 'immediately', 'soon', 'later'];
                timeframes.forEach(timeframe => {
                    if (query.includes(timeframe)) entities.timeframes.push(timeframe);
                });

                // Extract technology mentions
                const technologies = ['api', 'integration', 'mobile', 'web', 'cloud', 'ai', 'blockchain', 'crypto'];
                technologies.forEach(tech => {
                    if (query.includes(tech)) entities.technologies.push(tech);
                });

                // Extract industry mentions
                bayRoyalKnowledge.industries.forEach(industry => {
                    if (query.includes(industry.name.toLowerCase())) {
                        entities.industries.push(industry.name);
                    }
                });

                // Check for urgency indicators
                const urgencyWords = ['urgent', 'asap', 'immediately', 'quickly', 'fast', 'emergency'];
                entities.urgency = urgencyWords.some(word => query.includes(word));

                return entities;
            }

            generateEnhancedResponse(intentResult, entities, originalQuery) {
                const { intent, confidence } = intentResult;
                const style = this.determineResponseStyle();
                
                // Handle conversational intents first
                switch (intent) {
                    case 'personal_wellbeing':
                        return this.generatePersonalWellbeingResponse(originalQuery, style);
                    
                    case 'bot_identity':
                        return this.generateBotIdentityResponse(style);
                    
                    case 'casual_conversation':
                        return this.generateCasualConversationResponse(originalQuery, style);
                    
                    case 'compliments':
                        return this.generateComplimentResponse(originalQuery, style);
                    
                    case 'weather_time':
                        return this.generateWeatherTimeResponse(originalQuery, style);
                    
                    case 'capabilities':
                        return this.generateCapabilitiesResponse(style);
                    
                    case 'goodbye':
                        return this.generateGoodbyeResponse(style);

                    case 'greeting':
                        return this.generatePersonalizedGreeting(style);
                    
                    case 'services_general':
                        return this.generateEnhancedServicesOverview(entities, style);
                    
                    case 'payments':
                        return this.generateAdvancedPaymentsResponse(entities, style);
                    
                    case 'projects':
                        return this.generateAdvancedProjectsResponse(entities, style);
                    
                    case 'payroll':
                        return this.generateAdvancedPayrollResponse(entities, style);
                    
                    case 'peo':
                        return this.generateAdvancedPEOResponse(entities, style);
                    
                    case 'contact':
                        return this.generateEnhancedContactResponse(entities, style);
                    
                    case 'about':
                        return this.generateEnhancedAboutResponse(style);
                    
                    case 'leadership':
                        return this.generateEnhancedLeadershipResponse(style);
                    
                    case 'pricing':
                        return this.generateEnhancedPricingResponse(entities, style);
                    
                    case 'industries':
                        return this.generateEnhancedIndustriesResponse(entities, style);
                    
                    case 'locations':
                        return this.generateEnhancedLocationsResponse(entities, style);
                    
                    case 'comparison':
                        return this.generateEnhancedComparisonResponse(style);
                    
                    case 'process':
                        return this.generateEnhancedProcessResponse(entities, style);
                    
                    case 'benefits':
                        return this.generateEnhancedBenefitsResponse(entities, style);
                    
                    case 'demo':
                        return this.generateDemoResponse(entities, style);
                    
                    case 'integration':
                        return this.generateIntegrationResponse(entities, style);
                    
                    default:
                        return this.generateContextualIntelligentResponse(originalQuery, entities, style);
                }
            }

            // Determine response style based on user profile and context
            determineResponseStyle() {
                const { sentiment, engagement_level } = this.userProfile;
                const timeInSession = Date.now() - this.sessionStartTime;
                
                let style = {
                    formality: 'professional',
                    enthusiasm: 'moderate',
                    detail_level: 'standard',
                    personalization: 'low'
                };

                // Adjust based on sentiment
                if (sentiment.tone === 'positive') {
                    style.enthusiasm = 'high';
                    style.personalization = 'high';
                } else if (sentiment.tone === 'negative') {
                    style.formality = 'formal';
                    style.detail_level = 'detailed';
                }

                // Adjust based on urgency
                if (sentiment.urgent) {
                    style.detail_level = 'concise';
                    style.formality = 'direct';
                }

                // Adjust based on engagement level
                if (this.responseCount > 3) {
                    style.personalization = 'high';
                    style.detail_level = 'detailed';
                }

                return style;
            }

            // Enhanced greeting with personalization
            generatePersonalizedGreeting(style) {
                const timeOfDay = this.getTimeOfDay();
                const personalizedGreetings = [
                    `${timeOfDay}! Welcome to Bay Royal International Limited! 🏢\n\nI'm your enhanced AI assistant, powered by advanced intelligence to provide you with comprehensive information about our services.\n\n**Our Core Services (The 4 Ps):**\n• 💳 **Payment Solutions** - Advanced fintech & secure processing\n• 🚀 **Project Management** - International standard delivery\n• 👥 **Payroll & HR** - Professional people management\n• 🏛️ **P.E.O. Services** - Complete employment solutions\n\n**🌍 Serving Africa:** Nigeria • Ghana • Kenya\n\nWhat specific area can I help you explore today?`,
                    
                    `Hello and ${timeOfDay}! 👋\n\n**Bay Royal International Limited** - Your trusted partner for comprehensive business solutions across Africa.\n\n**Why Choose Bay Royal?**\n✨ Multi-country presence with local expertise\n✨ International best practices with African market knowledge\n✨ End-to-end service delivery across all 4 Ps\n✨ 98% client satisfaction rate\n\n**Ready to Transform Your Business?**\nI'm here to provide detailed information about our services, pricing, implementation processes, and how we can specifically help your business succeed.\n\nWhat would you like to know first?`
                ];
                
                return personalizedGreetings[Math.floor(Math.random() * personalizedGreetings.length)];
            }

            getTimeOfDay() {
                const hour = new Date().getHours();
                if (hour < 12) return "Good morning";
                if (hour < 17) return "Good afternoon";
                return "Good evening";
            }

            // Enhanced services overview with dynamic content
            generateEnhancedServicesOverview(entities, style) {
                let response = `🎯 **Bay Royal's Comprehensive Service Portfolio**\n\n`;
                
                if (entities.industries.length > 0) {
                    response += `**Perfect for ${entities.industries.join(', ')} Industry:**\n\n`;
                }

                response += `<div class="service-card">
<div class="service-title">💳 Payment Solutions & Fintech</div>
• Advanced payment processing with 99.9% uptime<br>
• Mobile & cryptocurrency payment integration<br>
• Custom API development & financial consulting<br>
• Cross-border solutions supporting 150+ currencies<br>
• PCI DSS Level 1 compliance & fraud protection
</div>

<div class="service-card">
<div class="service-title">🚀 Project Management Excellence</div>
• End-to-end delivery using PMI & PRINCE2 standards<br>
• Digital transformation & system integration<br>
• 98% on-time delivery with budget guarantees<br>
• Agile & waterfall methodologies<br>
• Risk management & quality assurance
</div>

<div class="service-card">
<div class="service-title">👥 Payroll & HR Services</div>
• Multi-country payroll processing across Africa<br>
• Complete employee lifecycle management<br>
• Benefits administration & compliance<br>
• HR technology platforms & analytics<br>
• Certified professionals with local expertise
</div>

<div class="service-card">
<div class="service-title">🏛️ Professional Employer Organization</div>
• Co-employment with shared responsibilities<br>
• Complete HR outsourcing & administration<br>
• 30-50% cost reduction vs in-house operations<br>
• Risk mitigation & compliance management<br>
• Enterprise-level benefits access
</div>

**🏆 Our Track Record:**\n✅ 500+ successful projects delivered\n✅ 98% client satisfaction & retention rate\n✅ Multi-country presence: Nigeria, Ghana, Kenya\n✅ International standards with local expertise\n\n`;

                if (entities.urgency) {
                    response += `**⚡ Need Immediate Assistance?**\nI can connect you directly with our specialists for urgent requirements.\n\n`;
                }

                response += `Which service area interests you most? I can provide detailed information, pricing, and implementation timelines.`;

                return response;
            }

            // Advanced payments response with technical details
            generateAdvancedPaymentsResponse(entities, style) {
                let response = `💳 **Bay Royal Payment Solutions - Advanced Fintech Platform**\n\n`;

                if (entities.technologies.includes('api')) {
                    response += `**🔌 API Integration Capabilities:**\n• RESTful APIs with comprehensive documentation\n• Webhook support for real-time notifications\n• SDKs available for major programming languages\n• Sandbox environment for testing and development\n\n`;
                }

                response += `**🔐 Enterprise Security & Compliance:**\n• PCI DSS Level 1 certification\n• End-to-end encryption (AES-256)\n• Multi-factor authentication\n• Real-time fraud detection with AI\n• ISO 27001 security management\n\n**💰 Payment Processing Capabilities:**\n• **Transaction Volume:** Unlimited scalability\n• **Processing Speed:** Sub-second authorization\n• **Uptime Guarantee:** 99.9% SLA with monitoring\n• **Currency Support:** 150+ currencies with real-time rates\n• **Settlement:** Same-day or next-day options\n\n**📱 Modern Payment Methods:**\n• **Mobile Payments:** Apple Pay, Google Pay, Samsung Pay\n• **Digital Wallets:** Custom wallet development\n• **Cryptocurrency:** Bitcoin, Ethereum, stablecoins\n• **QR Payments:** Dynamic QR code generation\n• **Contactless:** NFC and tap-to-pay solutions\n\n**🌍 Cross-Border Excellence:**\n• Multi-currency merchant accounts\n• Foreign exchange optimization\n• International compliance management\n• Regional payment method support\n• Cross-border fee optimization\n\n**📊 Advanced Analytics & Reporting:**\n• Real-time transaction monitoring\n• Comprehensive fraud analytics\n• Revenue optimization insights\n• Custom reporting dashboards\n• API-based data export\n\n**💡 Industry-Specific Solutions:**\n`;

                if (entities.industries.length > 0) {
                    entities.industries.forEach(industry => {
                        response += `• **${industry}:** Specialized payment flows and compliance\n`;
                    });
                } else {
                    response += `• **E-commerce:** Shopping cart integration & subscription billing\n• **Fintech:** White-label payment solutions\n• **Healthcare:** HIPAA-compliant payment processing\n• **Education:** Student fee management & installments\n• **Government:** Secure citizen payment portals\n`;
                }

                response += `\n**🚀 Implementation Process:**\n1. **Discovery & Integration Planning** (1-2 weeks)\n2. **API Development & Testing** (2-3 weeks)\n3. **Security Validation & Compliance** (1 week)\n4. **Go-Live & Monitoring** (1 week)\n5. **Optimization & Support** (Ongoing)\n\n**💰 Pricing Structure:**\n• Competitive transaction fees (2.5% - 3.5%)\n• Volume-based discount tiers\n• No setup fees for qualified businesses\n• Transparent pricing with no hidden costs\n\n`;

                if (entities.urgency) {
                    response += `**⚡ Urgent Implementation Available:**\nWe can fast-track your payment integration with our express implementation service (additional fees may apply).\n\n`;
                }

                response += `Ready to revolutionize your payment processing? Let's discuss your specific requirements and create a custom solution!`;

                return response;
            }

            // Update user profile based on interactions
            updateUserProfile(intent, entities) {
                // Track service interests
                if (entities.services.length > 0) {
                    entities.services.forEach(service => {
                        if (!this.userProfile.preferredServices.includes(service)) {
                            this.userProfile.preferredServices.push(service);
                        }
                    });
                }

                // Track general interests
                if (!this.userProfile.interests.includes(intent)) {
                    this.userProfile.interests.push(intent);
                }

                // Update engagement level
                if (this.responseCount > 5) {
                    this.userProfile.engagement_level = 'high';
                } else if (this.responseCount > 2) {
                    this.userProfile.engagement_level = 'medium';
                }
            }

            // Generate demo response
            generateDemoResponse(entities, style) {
                return `🎬 **Bay Royal Service Demonstrations**\n\nI'd be happy to arrange a personalized demonstration of our services!\n\n**Available Demo Options:**\n\n<div class="service-card">\n<div class="service-title">💳 Payment Solutions Demo</div>\n• Live payment processing demonstration<br>\n• API integration walkthrough<br>\n• Security features showcase<br>\n• Custom implementation planning\n</div>\n\n<div class="service-card">\n<div class="service-title">🚀 Project Management Demo</div>\n• Project planning methodology<br>\n• Collaboration tools demonstration<br>\n• Progress tracking systems<br>\n• Quality assurance processes\n</div>\n\n<div class="service-card">\n<div class="service-title">👥 HR & Payroll Demo</div>\n• Payroll processing walkthrough<br>\n• Employee self-service portal<br>\n• HR analytics dashboard<br>\n• Compliance management tools\n</div>\n\n**📅 Schedule Your Demo:**\n• **Duration:** 30-60 minutes\n• **Format:** Video conference or in-person\n• **Customization:** Tailored to your specific needs\n• **Follow-up:** Detailed proposal and implementation plan\n\n**🎯 What You'll Get:**\n✅ Live system demonstration\n✅ Q&A with our experts\n✅ Custom solution recommendations\n✅ Implementation timeline and pricing\n✅ Technical documentation\n\nWhich service demo interests you most? I can connect you with our specialists to schedule a session!`;
            }

            // Generate integration response
            generateIntegrationResponse(entities, style) {
                return `🔌 **Bay Royal Integration Services**\n\n**Seamless System Integration Across All Services:**\n\n<div class="service-card">\n<div class="service-title">💳 Payment Integration</div>\n• RESTful API with comprehensive documentation<br>\n• Webhook notifications for real-time updates<br>\n• SDKs for popular programming languages<br>\n• Sandbox environment for testing<br>\n• White-label solutions available\n</div>\n\n<div class="service-card">\n<div class="service-title">🚀 Project Management Integration</div>\n• Project management tool APIs<br>\n• Third-party software integration<br>\n• Custom workflow automation<br>\n• Data synchronization services<br>\n• Reporting and analytics APIs\n</div>\n\n<div class="service-card">\n<div class="service-title">👥 HR System Integration</div>\n• HRIS and payroll system APIs<br>\n• Employee data synchronization<br>\n• Benefits platform integration<br>\n• Time tracking system connectivity<br>\n• Compliance reporting automation\n</div>\n\n**🛠️ Technical Capabilities:**\n• **API Standards:** REST, GraphQL, SOAP\n• **Authentication:** OAuth 2.0, API keys, JWT\n• **Data Formats:** JSON, XML, CSV\n• **Protocols:** HTTPS, SFTP, WebSocket\n• **Integration Methods:** Real-time, batch, scheduled\n\n**🔧 Integration Support:**\n• Dedicated technical team\n• Comprehensive documentation\n• Code samples and tutorials\n• Testing and validation support\n• Ongoing maintenance and updates\n\n**⚡ Implementation Timeline:**\n• **Simple Integration:** 1-2 weeks\n• **Complex Integration:** 3-6 weeks\n• **Custom Development:** 6-12 weeks\n\nNeed help with a specific integration? Let's discuss your technical requirements!`;
            }

            generatePersonalWellbeingResponse(query, style) {
                const responses = [
                    `I'm doing fantastic, thank you for asking! 😊 As Bay Royal's AI assistant, I'm energized and ready to help you explore our comprehensive business solutions. I'm particularly excited about our innovative payment technologies and project management excellence.\n\nHow are YOU doing today? What brings you to Bay Royal International?`,
                    
                    `I'm having a wonderful day, thanks for checking in! 🌟 I'm operating at full capacity and feeling great about helping businesses like yours discover the perfect solutions from Bay Royal's extensive portfolio.\n\nI hope you're having an amazing day too! What can I help you accomplish today?`,
                    
                    `I'm doing exceptionally well, appreciate you asking! 🚀 Every day is exciting when you get to showcase Bay Royal's cutting-edge services across payments, projects, payroll, and P.E.O. solutions.\n\nMore importantly, how can I make YOUR day better by helping with your business needs?`,
                    
                    `I'm thriving, thank you! 💪 As an AI powered by Bay Royal's innovative spirit, I'm always energized to help businesses transform and grow. I'm particularly passionate about our multi-country expertise across Africa.\n\nWhat about you? What business challenges can I help you solve today?`
                ];
                
                return responses[Math.floor(Math.random() * responses.length)];
            }

            generateBotIdentityResponse(style) {
                return `Hello! I'm Bay Royal's Advanced AI Assistant 🤖✨\n\n**Who I Am:**\n• Your intelligent guide to Bay Royal International Limited\n• Powered by advanced conversational AI and deep business knowledge\n• Designed to provide comprehensive, personalized assistance\n• Available 24/7 to help with all your business solution needs\n\n**My Personality:**\n• Professional yet friendly and approachable\n• Passionate about helping businesses succeed\n• Knowledgeable about all Bay Royal services and solutions\n• Always eager to provide detailed, helpful information\n\n**What Makes Me Special:**\n• I understand context and remember our conversation\n• I can provide technical details, pricing, and implementation guidance\n• I adapt my responses to your specific industry and needs\n• I'm constantly learning to serve you better\n\n**My Mission:**\nTo help you discover how Bay Royal's comprehensive services (Payment Solutions, Project Management, Payroll & HR, and P.E.O. Services) can transform your business across Africa.\n\nI'm here to make your experience with Bay Royal exceptional! What would you like to explore together?`;
            }

            generateCasualConversationResponse(query, style) {
                const lowerQuery = query.toLowerCase();
                
                if (lowerQuery.includes('thank') || lowerQuery.includes('appreciate')) {
                    return `You're absolutely welcome! 😊 It's my pleasure to help. Bay Royal is all about exceptional service, and I'm here to ensure you get the best experience possible.\n\nIs there anything else about our services you'd like to explore? I'm here and ready to assist!`;
                }
                
                if (lowerQuery.includes('nice to meet') || lowerQuery.includes('pleasure')) {
                    return `The pleasure is all mine! 🤝 I'm delighted to meet you and excited to help you discover how Bay Royal can elevate your business.\n\nI love connecting with forward-thinking professionals like yourself. What industry are you in, and how can Bay Royal support your goals?`;
                }
                
                if (lowerQuery.includes('awesome') || lowerQuery.includes('cool') || lowerQuery.includes('interesting')) {
                    return `I'm so glad you think so! 🌟 Bay Royal really is an awesome company with incredible solutions. We're passionate about innovation and excellence in everything we do.\n\nWhat aspect interests you most? Our cutting-edge payment technologies, world-class project management, or perhaps our comprehensive HR solutions?`;
                }
                
                return `I appreciate the friendly conversation! 😊 It's wonderful to connect with you. Bay Royal values building genuine relationships with our clients and partners.\n\nWhile we're chatting, is there anything specific about Bay Royal's services you'd like to learn about?`;
            }

            generateComplimentResponse(query, style) {
                const responses = [
                    `Thank you so much! 😊 That really means a lot. I'm powered by Bay Royal's commitment to excellence, so I strive to reflect the same high standards in everything I do.\n\nI'm here to provide you with the best possible assistance. What can I help you discover about Bay Royal today?`,
                    
                    `You're too kind! 🙏 I'm just doing my best to represent Bay Royal's values of professionalism and exceptional service. Our entire team is dedicated to helping businesses succeed.\n\nI'd love to help you explore how Bay Royal can bring that same excellence to your business needs!`,
                    
                    `I really appreciate that feedback! 🌟 It motivates me to continue providing top-notch assistance. Bay Royal has trained me well to be helpful, knowledgeable, and genuinely caring about your success.\n\nWhat business challenge can I help you solve today?`
                ];
                
                return responses[Math.floor(Math.random() * responses.length)];
            }

            generateWeatherTimeResponse(query, style) {
                const now = new Date();
                const timeString = now.toLocaleTimeString();
                const dateString = now.toLocaleDateString();
                
                return `Right now it's ${timeString} on ${dateString}! ⏰\n\nWhile I don't have real-time weather data, I can tell you that Bay Royal operates across multiple time zones in Africa - from Lagos to Nairobi! 🌍\n\n**Our Office Locations & Time Zones:**\n• **Lagos, Nigeria** - West Africa Time (WAT)\n• **Abuja, Nigeria** - West Africa Time (WAT)\n• **Accra, Ghana** - Greenwich Mean Time (GMT)\n• **Nairobi, Kenya** - East Africa Time (EAT)\n\nNo matter what time zone you're in, we're here to help! What can I assist you with regarding Bay Royal's services?`;
            }

            generateCapabilitiesResponse(style) {
                return `I'm equipped with extensive capabilities to help you! 🚀\n\n**What I Can Do:**\n\n🧠 **Intelligent Assistance:**\n• Answer detailed questions about all Bay Royal services\n• Provide technical specifications and implementation details\n• Explain pricing models and value propositions\n• Guide you through our processes and methodologies\n\n💬 **Conversational AI:**\n• Engage in natural, friendly conversations\n• Remember our discussion context\n• Adapt responses to your specific needs\n• Provide personalized recommendations\n\n📊 **Business Intelligence:**\n• Industry-specific insights and solutions\n• ROI calculations and cost-benefit analysis\n• Compliance and regulatory guidance\n• Integration and technical requirements\n\n🌍 **Multi-Country Expertise:**\n• Information about our African operations\n• Local market knowledge and regulations\n• Cross-border solution capabilities\n• Cultural and business practice insights\n\n🎯 **Specialized Knowledge Areas:**\n• Payment processing and fintech innovations\n• Project management methodologies\n• HR and payroll compliance across Africa\n• Professional Employer Organization services\n\n**I'm here to be your comprehensive guide to Bay Royal International Limited!**\n\nWhat specific area would you like to explore first?`;
            }

            generateGoodbyeResponse(style) {
                const responses = [
                    `Thank you for chatting with me today! 👋 It's been a pleasure helping you learn about Bay Royal International Limited.\n\n**Before you go:**\n• Feel free to return anytime with questions\n• Consider scheduling a consultation with our team\n• Check out our website for more detailed information\n\n**Contact Information:**\n📧 Email: info@bayroyalinternational.com\n🌐 Website: bayroyalinternational.com\n\nHave a fantastic day, and I look forward to helping Bay Royal serve your business needs soon! 🌟`,
                    
                    `It's been wonderful talking with you! 😊 I hope I've provided valuable insights about Bay Royal's comprehensive business solutions.\n\n**Next Steps:**\n• Reach out to our sales team for personalized quotes\n• Schedule a demo to see our solutions in action\n• Connect with us on social media for updates\n\nTake care, and remember - Bay Royal is here whenever you're ready to transform your business! 🚀`,
                    
                    `Goodbye for now! 🌟 Thank you for your interest in Bay Royal International Limited. I've enjoyed our conversation and hope I've been helpful.\n\n**Stay Connected:**\n• Visit our offices in Lagos, Abuja, Accra, or Nairobi\n• Follow our latest innovations and success stories\n• Join our community of satisfied clients across Africa\n\nWishing you continued success in all your business endeavors! 💼✨`
                ];
                
                return responses[Math.floor(Math.random() * responses.length)];
            }

            // Enhanced contextual intelligent response for unmatched queries
            generateContextualIntelligentResponse(query, entities, style) {
                let response = `🤖 **Enhanced AI Analysis of Your Query**\n\n`;
                
                response += `I understand you're asking about: "${query}"\n\n`;

                // Analyze what the user might be looking for
                const keywordAnalysis = this.analyzeQueryKeywords(query);
                
                if (keywordAnalysis.length > 0) {
                    response += `**Based on your query, you might be interested in:**\n\n`;
                    keywordAnalysis.forEach(analysis => {
                        response += `• **${analysis.topic}:** ${analysis.description}\n`;
                    });
                    response += `\n`;
                }

                // Provide contextual suggestions based on conversation history
                if (this.userProfile.preferredServices.length > 0) {
                    response += `**Based on your previous interests in ${this.userProfile.preferredServices.join(', ')}, I recommend:**\n\n`;
                }

                response += `**🔍 I can provide detailed information about:**\n\n**Services & Solutions:**\n• Payment processing and fintech innovations\n• Project management and delivery excellence\n• Payroll and HR services across Africa\n• Professional Employer Organization (P.E.O.)\n\n**Business Information:**\n• Company background and leadership\n• Office locations and contact details\n• Industries we serve and success stories\n• Pricing models and value propositions\n\n**Technical Details:**\n• Implementation processes and timelines\n• Integration capabilities and APIs\n• Security and compliance standards\n• Technology platforms and tools\n\n**Getting Started:**\n• Consultation and needs assessment\n• Custom solution development\n• Demo scheduling and trials\n• Onboarding and support processes\n\n**💡 Try asking me:**\n• "How does your payment processing work?"\n• "What industries do you serve?"\n• "Can you show me your pricing?"\n• "How do I get started with Bay Royal?"\n\nWhat specific aspect of Bay Royal would you like to explore?`;

                return response;
            }

            // Analyze query keywords for better understanding
            analyzeQueryKeywords(query) {
                const keywordMap = {
                    'technology': {
                        keywords: ['tech', 'software', 'system', 'digital', 'automation', 'ai'],
                        topic: 'Technology Solutions',
                        description: 'Our advanced technology platforms and digital transformation services'
                    },
                    'security': {
                        keywords: ['secure', 'security', 'protection', 'safe', 'compliance'],
                        topic: 'Security & Compliance',
                        description: 'Enterprise-grade security measures and regulatory compliance'
                    },
                    'cost': {
                        keywords: ['cost', 'price', 'budget', 'affordable', 'save', 'roi'],
                        topic: 'Cost & Value',
                        description: 'Transparent pricing and return on investment benefits'
                    },
                    'support': {
                        keywords: ['support', 'help', 'service', 'assistance', 'customer'],
                        topic: 'Support Services',
                        description: '24/7 customer support and professional assistance'
                    },
                    'implementation': {
                        keywords: ['implement', 'setup', 'install', 'deploy', 'start'],
                        topic: 'Implementation Process',
                        description: 'Step-by-step implementation and onboarding process'
                    }
                };

                const analysis = [];
                Object.entries(keywordMap).forEach(([key, config]) => {
                    if (config.keywords.some(keyword => query.includes(keyword))) {
                        analysis.push(config);
                    }
                });

                return analysis;
            }

            // Additional enhanced methods would continue here...
            // (For brevity, I'm including the key enhancements. The full implementation would include all methods)
        }

        // Initialize the enhanced AI engine
        const bayRoyalAI = new EnhancedBayRoyalAI();
        let isFirstVisit = true;

        function sendMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();
                
            if (message) {
                addMessage('user', message);
                input.value = '';
                adjustTextareaHeight(input);
                messageCount++;
                engagementScore += 5;
                    
                // Track high-value keywords
                const highValueKeywords = ['buy', 'purchase', 'price', 'cost', 'demo', 'trial', 'contact', 'sales'];
                if (highValueKeywords.some(keyword => message.toLowerCase().includes(keyword))) {
                    sessionValue += 20;
                    conversionOpportunities++;
                }
                    
                showTypingIndicator(true);
                    
                const thinkingTime = Math.random() * 2000 + 1500;
                setTimeout(() => {
                    const response = bayRoyalAI.processQuery(message);
                    showTypingIndicator(false);
                    addMessage('bot', response, true);
                        
                    // Show conversion elements for high-value sessions
                    if (sessionValue > 50 && !leadCaptured) {
                        showConversionPopup();
                    }
                }, thinkingTime);
            }
        }

        function captureLead() {
            const name = document.getElementById('leadName')?.value;
            const email = document.getElementById('leadEmail')?.value;
            const company = document.getElementById('leadCompany')?.value;
            const phone = document.getElementById('leadPhone')?.value;
                
            if (name && email) {
                leadCaptured = true;
                const successMessage = `
                    🎉 **Thank You ${name}!**
                        
                    Your consultation is confirmed! Our senior solutions architect will contact you within 2 hours.
                        
                    **What happens next:**
                    ✅ Personalized needs assessment
                    ✅ Custom solution design
                    ✅ ROI projection and pricing
                    ✅ Implementation roadmap
                        
                    **Immediate Access:**
                    📧 Check your email for our Business Transformation Guide
                    📱 Download our mobile app for real-time updates
                        
                    Welcome to the Bay Royal family! 🚀
                `;
                addMessage('bot', successMessage, true);
                    
                // Send lead data (in real implementation, this would go to your CRM)
                console.log('Lead Captured:', { name, email, company, phone, leadScore: bayRoyalAI.userProfile.leadScore });
            }
        }

        function showUrgencyBanner() {
            const banner = document.createElement('div');
            banner.className = 'urgency-banner';
            banner.innerHTML = '🔥 SPECIAL OFFER: 50% OFF Implementation - Limited Time!';
            document.querySelector('.chat-header').appendChild(banner);
                
            setTimeout(() => {
                banner.remove();
            }, 10000);
        }

        function showConversionPopup() {
            const popup = `
                <div style="background: linear-gradient(135deg, #10b981, #059669); padding: 15px; border-radius: 10px; margin: 10px 0; text-align: center; color: white;">
                    <h4>🎯 You're Pre-Qualified!</h4>
                    <p>Based on our conversation, you qualify for our premium business package.</p>
                    <button class="conversion-cta" onclick="captureLead()" style="margin: 5px;">
                        Claim Your Spot Now
                    </button>
                    <p style="font-size: 12px; margin: 5px 0;">⏰ Offer expires in 24 hours</p>
                </div>
            `;
            addMessage('bot', popup, false);
        }

        // Enhanced chat functionality with advanced features
        function toggleChat() {
            const container = document.getElementById('chatContainer');
            const toggle = document.getElementById('chatToggle');
            const badge = document.getElementById('notificationBadge');
            
            if (container.style.display === 'none' || container.style.display === '') {
                container.style.display = 'flex';
                toggle.innerHTML = '✕';
                toggle.style.transform = 'rotate(180deg)';
                badge.style.display = 'none';
                
                // Show enhanced welcome message if first time
                if (isFirstVisit) {
                    setTimeout(() => {
                        const welcomeMessage = bayRoyalAI.generatePersonalizedGreeting({});
                        addMessage('bot', welcomeMessage, true);
                        isFirstVisit = false;
                    }, 800);
                }
            } else {
                container.style.display = 'none';
                toggle.innerHTML = '💬';
                toggle.style.transform = 'rotate(0deg)';
            }
        }

        function handleKeyPress(event) {
            if (event.key === 'Enter' && !event.shiftKey) {
                event.preventDefault();
                sendMessage();
            }
        }

        function showTypingIndicator(show) {
            const indicator = document.getElementById('typingIndicator');
            const statusText = document.getElementById('statusText');
            
            if (show) {
                statusText.style.display = 'none';
                indicator.style.display = 'block';
            } else {
                statusText.style.display = 'block';
                indicator.style.display = 'none';
            }
        }

        function addMessage(sender, text, showSuggestions = false) {
            const messagesContainer = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message';
            
            const messageContent = document.createElement('div');
            messageContent.className = sender === 'bot' ? 'bot-message' : 'user-message';
            messageContent.innerHTML = text.replace(/\n/g, '<br>');
            
            // Add sentiment indicator for bot messages
            if (sender === 'bot') {
                const sentimentSpan = document.createElement('span');
                sentimentSpan.className = 'sentiment-indicator';
                sentimentSpan.innerHTML = '🧠';
                messageContent.appendChild(sentimentSpan);
            }
            
            messageDiv.appendChild(messageContent);
            
            // Add enhanced smart suggestions for bot messages
            if (sender === 'bot' && showSuggestions) {
                const suggestions = generateEnhancedSuggestions(text);
                if (suggestions.length > 0) {
                    const suggestionsDiv = createSuggestionChips(suggestions);
                    messageDiv.appendChild(suggestionsDiv);
                }
            }
            
            messagesContainer.appendChild(messageDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function generateEnhancedSuggestions(botMessage) {
            const lowerMessage = botMessage.toLowerCase();
            
            // Enhanced context-aware suggestions
            if (lowerMessage.includes('welcome') || lowerMessage.includes('hello')) {
                return ['Our Services', 'Pricing Information', 'Schedule Demo', 'Contact Sales'];
            }
            
            if (lowerMessage.includes('services') || lowerMessage.includes('portfolio')) {
                return ['Payment Solutions', 'Project Management', 'Payroll & HR', 'P.E.O. Services', 'Get Pricing'];
            }
            
            if (lowerMessage.includes('payment') || lowerMessage.includes('fintech')) {
                return ['API Integration', 'Security Features', 'Pricing Details', 'Implementation Timeline', 'Schedule Demo'];
            }
            
            if (lowerMessage.includes('project') || lowerMessage.includes('management')) {
                return ['Project Methodology', 'Success Stories', 'Timeline & Budget', 'Industries Served', 'Get Quote'];
            }
            
            if (lowerMessage.includes('payroll') || lowerMessage.includes('hr')) {
                return ['Multi-Country Payroll', 'HR Compliance', 'Benefits Administration', 'Implementation Process'];
            }
            
            if (lowerMessage.includes('peo') || lowerMessage.includes('professional employer')) {
                return ['Co-Employment Benefits', 'Cost Savings', 'Risk Management', 'Get Started'];
            }
            
            if (lowerMessage.includes('contact') || lowerMessage.includes('office')) {
                return ['Lagos Office', 'Abuja Office', 'Accra Office', 'Nairobi Office', 'Schedule Call'];
            }
            
            if (lowerMessage.includes('pricing') || lowerMessage.includes('cost')) {
                return ['Get Custom Quote', 'ROI Calculator', 'Payment Plans', 'Schedule Consultation'];
            }
            
            // Default enhanced suggestions
            return ['Get Pricing', 'Schedule Demo', 'Contact Sales', 'Learn More'];
        }

        function createSuggestionChips(suggestions) {
            const suggestionsDiv = document.createElement('div');
            suggestionsDiv.className = 'quick-suggestions';
            
            suggestions.forEach(suggestion => {
                const chip = document.createElement('span');
                chip.className = 'suggestion-chip';
                chip.textContent = suggestion;
                chip.onclick = () => {
                    document.getElementById('chatInput').value = suggestion;
                    sendMessage();
                };
                suggestionsDiv.appendChild(chip);
            });
            
            return suggestionsDiv;
        }

        function adjustTextareaHeight(textarea) {
            textarea.style.height = 'auto';
            const newHeight = Math.min(textarea.scrollHeight, 120);
            textarea.style.height = newHeight + 'px';
        }

        // Initialize enhanced features
        document.getElementById('chatInput').addEventListener('input', function() {
            adjustTextareaHeight(this);
        });

        // Enhanced notification system
        function showNotificationBadge() {
            const badge = document.getElementById('notificationBadge');
            const container = document.getElementById('chatContainer');
            
            if (container.style.display !== 'flex') {
                badge.style.display = 'flex';
                setTimeout(() => {
                    badge.style.display = 'none';
                }, 10000);
            }
        }

        // Show notification after 30 seconds if chat hasn't been opened
        setTimeout(() => {
            if (isFirstVisit) {
                showNotificationBadge();
            }
        }, 30000);

        // Enhanced interactive features
        setInterval(() => {
            const toggle = document.getElementById('chatToggle');
            const container = document.getElementById('chatContainer');
            
            if (container.style.display !== 'flex') {
                // Enhanced pulse animation
                toggle.style.boxShadow = '0 12px 35px rgba(30, 60, 114, 0.8)';
                setTimeout(() => {
                    toggle.style.boxShadow = '0 10px 30px rgba(30, 60, 114, 0.4)';
                }, 2500);
            }
        }, 15000);

        // Prevent chat from closing when clicking inside
        document.getElementById('chatContainer').addEventListener('click', function(e) {
            e.stopPropagation();
        });

        // Enhanced keyboard shortcuts
        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey && e.key === 'm') {
                e.preventDefault();
                toggleChat();
            }
            
            // ESC to close chat
            if (e.key === 'Escape') {
                const container = document.getElementById('chatContainer');
                if (container.style.display === 'flex') {
                    toggleChat();
                }
            }
        });

        document.addEventListener('DOMContentLoaded', function() {
            console.log('🚀 Bay Royal AI Assistant Enhanced - Ready!');
            console.log('💡 Sales Features: Lead scoring, urgency detection, conversion optimization');
            console.log('🧠 Features: Advanced AI responses, sentiment analysis, contextual understanding, smart suggestions');
            console.log('⌨️ Shortcuts: Ctrl+M to toggle, ESC to close');
            console.log('🎯 Enhanced with: Personalization, urgency detection, technical integration details');
            
            // Auto-show welcome message
            setTimeout(() => {
                addMessage("Hello! I'm your Bay Royal AI Assistant. I'm here to help you with our services and answer any questions you might have. How are you doing today? 😊", 'bot');
            }, 1000);
        });
    </script>
</body>
</html>
